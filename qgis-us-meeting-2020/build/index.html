<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Yes QGIS Server rocks!... But why?</title><meta charset="UTF-8"></meta><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="hovercraft-qcooperative-theme/css/custom-hov.css" media="screen,projection"></link><link rel="stylesheet" href="hovercraft-qcooperative-theme/css/custom.css" media="screen,projection"></link><link rel="stylesheet" href="custom.css" media="screen,projection"></link><script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        messageStyle: "none",
        TeX : { extensions : ['color.js'] }
      });
    </script></head><body class="impress-not-supported"><div id="impress" data-transition-duration="1500"><div class="step step-level-1" step="0" id="presentation-title" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><h1 id="yes-qgis-server-rocks-but-why">Yes QGIS Server rocks!... But why?</h1><p>Paul Blottiere and Alessandro Pasotti</p><p>QCooperative</p><p>31-07-2020</p><img src="images/qgis.png" width="400" class="centered"></img></div><div class="step step-level-1" step="1" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="1600" data-y="0" data-z="0"><h1 id="where">Where?</h1><ul><li>On the QCooperative GitHub</li></ul><img src="images/github.png" width="600" class="centered"></img><p class="centered"><a href="https://github.com/qcooperative/presentations/tree/master/qgis-us-meeting-2020">https://github.com/qcooperative/presentations/tree/master/qgis-us-meeting-2020</a></p></div><div class="step step-level-1" step="2" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="3200" data-y="0" data-z="0"><h1 id="who">Who?</h1><ul><li><dl><dt>Paul Blottiere</dt><dd><ul><li>Lead Software Engineer</li><li>QGIS developer</li><li>QCooperative member</li></ul></dd></dl></li></ul><img src="images/pblottiere.png" width="200" class="centered"></img><p class="centered"><a href="https://twitter.com/pblottiere">@pblottiere</a></p></div><div class="step step-level-1" step="3" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="4800" data-y="0" data-z="0"><h1 id="id1">Who?</h1><ul><li><dl><dt>Alessandro Pasotti</dt><dd><ul><li>itOpen</li><li>QGIS developer and vice chair of QGIS.org PSC</li><li>QCooperative member</li></ul></dd></dl></li></ul><img src="images/elpaso.png" width="200" class="centered"></img><p class="centered"><a href="https://twitter.com/elpaso66">@elpaso66</a></p></div><div class="step step-level-1" step="4" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="6400" data-y="0" data-z="0"><h1 id="qcooperative">QCooperative</h1><ul><li>Broad range of GIS services</li><li>Open Source ethics</li><li>International</li><li>Active members of the QGIS community</li></ul><img src="images/qcooperative.png" width="500" class="centered"></img><p class="centered"><a href="https://twitter.com/CooperativeQ">@CooperativeQ</a></p></div><div class="step step-level-1" step="5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8000" data-y="0" data-z="0"><h1 id="qgis-desktop">QGIS Desktop</h1><ul><li>Main canvas as we know it</li><li>Layout manager</li><li>Processing framework</li><li>Database manager</li><li>...</li></ul><img src="images/desktop.png" width="600" class="centered"></img></div><div class="step step-level-1" step="6" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="9600" data-y="0" data-z="0"><h1 id="qgis-server">QGIS Server?</h1><ul><li>Map server based on QGIS core library</li><li>Official repositories provide a <strong>qgis-server</strong> package</li><li>Same roadmap as QGIS Desktop</li></ul><img src="images/splash314.png" width="600" class="centered"></img></div><div class="step step-level-1" step="7" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="11200" data-y="0" data-z="0"><p class="chapter">Awesomeness</p><img src="images/heart.png" width="200" class="centered"></img></div><div class="step step-level-1" step="8" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="12800" data-y="0" data-z="0"><h1 id="services">Services</h1><ul><li><dl><dt>Numerous services:</dt><dd><ul><li>WMS 1.1.0 and WMS 1.3.0</li><li>WFS 1.1 and OGC API Features (aka WFS3)</li><li>WMTS</li><li>WCS</li></ul></dd></dl></li></ul><img src="images/wfs3.png" width="500" class="centered"></img></div><div class="step step-level-1" step="9" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="14400" data-y="0" data-z="0"><h1 id="extensions-of-ogc-standards">Extensions of OGC standards</h1><ul><li>Vendor parameters and requests</li><li>Take full advantage of QGIS specificities</li><li>Some examples:<ul><li><strong>GetFeature</strong> and <strong>EXP_FILTER</strong></li><li><strong>GetMap</strong> and <strong>HIGHLIGHT_GEOM</strong></li></ul></li></ul><img src="images/redlining.png" width="500" class="centered"></img></div><div class="step step-level-1" step="10" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="16000" data-y="0" data-z="0"><h1 id="extensions-of-ogc-standards-ii">Extensions of OGC standards II</h1><ul><li>The most famous: <strong>GetPrint</strong><ul><li>template selection</li><li>atlas</li></ul></li></ul><img src="images/getprint.jpg" width="600" class="centered"></img></div><div class="step step-level-1" step="11" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="17600" data-y="0" data-z="0"><h1 id="ogc-certification">OGC certification</h1><ul><li>QGIS 3.10 is certified for WMS 1.3.0</li><li>Ongoing certification for OGC API Features (WFS3)</li></ul><img src="images/badge.png" width="200" class="centered"></img></div><div class="step step-level-1" step="12" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="19200" data-y="0" data-z="0"><h1 id="configuration">Configuration</h1><ul><li>QGIS Desktop acts like a WYSIWYG</li></ul><img src="images/config.png" width="800" class="centered"></img><p class="centered"><strong>http://localhost/qgisserver?MAP=myproject.qgz</strong></p></div><div class="step step-level-1" step="13" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="20800" data-y="0" data-z="0"><h1 id="python-plugins">Python plugins</h1><ul><li>Filtering</li><li>Custom services (&#xE0; la WMS)</li><li>Custom API (&#xE0; la OGCAPIF)</li><li>Hello world plugin: <a href="https://github.com/elpaso/qgis-helloserver">https://github.com/elpaso/qgis-helloserver</a></li><li>Lot of examples: <a href="https://github.com/elpaso/qgis3-server-vagrant/tree/master/resources/web/plugins">https://github.com/elpaso/qgis3-server-vagrant/tree/master/resources/web/plugins</a></li></ul><img src="images/hw.png" width="400" class="centered"></img></div><div class="step step-level-1" step="14" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="22400" data-y="0" data-z="0"><h1 id="usage">Usage</h1><ul><li>FCGI process</li><li>Python (standalone or embedded)</li><li>Development server</li></ul><pre class="highlight code python"><span class="n">server</span> <span class="o">=</span> <span class="n">QgsServer</span><span class="p">()</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">QgsBufferServerRequest</span><span class="p">(</span>
    <span class="s1">'http://localhost:8081/?'</span>
    <span class="s1">'SERVICE=WMS&amp;REQUEST=GetCapabilities'</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">QgsBufferServerResponse</span><span class="p">()</span>
<span class="n">server</span><span class="o">.</span><span class="n">handleRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span></pre><p class="centered"><a href="https://github.com/qgis/QGIS/blob/master/tests/src/python/qgis_wrapped_server.py">https://github.com/qgis/QGIS/blob/master/tests/src/python/qgis_wrapped_server.py</a></p></div><div class="step step-level-1" step="15" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="24000" data-y="0" data-z="0"><h1 id="robustness">Robustness</h1><ul><li>Pretty good unit test coverage</li><li>Continuous integration</li><li>Nightly OGC tests for WMS 1.3.0 and OGCAPIF on master</li></ul><img src="images/certif.png" width="800" class="centered"></img><p class="centered"><a href="http://test.qgis.org/ogc_cite/">http://test.qgis.org/ogc_cite/</a></p></div><div class="step step-level-1" step="16" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="25600" data-y="0" data-z="0"><h1 id="docker-images">Docker images</h1><ul><li>OpenQuake (my favorite): <a href="https://hub.docker.com/r/openquake/qgis-server">https://hub.docker.com/r/openquake/qgis-server</a></li><li>Kartoza: <a href="https://registry.hub.docker.com/u/kartoza/qgis-server">https://registry.hub.docker.com/u/kartoza/qgis-server</a></li><li>C2C: <a href="https://hub.docker.com/r/camptocamp/qgis-server">https://hub.docker.com/r/camptocamp/qgis-server</a></li><li>Oslandia: <a href="https://gitlab.com/Oslandia/qgis/docker-qgis">https://gitlab.com/Oslandia/qgis/docker-qgis</a></li><li>and a lot more</li></ul><img src="images/docker.png" width="300" class="centered"></img></div><div class="step step-level-1" step="17" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="27200" data-y="0" data-z="0"><h1 id="web-clients">Web clients</h1><ul><li>Simple integrated web client for WFS3</li><li><a href="https://www.3liz.com/en/lizmap.html">Lizmap</a></li><li><a href="https://blog.sourcepole.ch/assets/2019/qwc2-foss4g19.pdf">QWC2</a></li><li><a href="https://g3wsuite.it/en/g3w-suite-publish-qgis-projects/">G3W Suite</a></li></ul><img src="images/g3w.jpg" width="700" class="centered"></img></div><div class="step step-level-1" step="18" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="28800" data-y="0" data-z="0"><h1 id="resources">Resources</h1><ul><li><a href="https://docs.qgis.org/3.10/en/docs/user_manual/working_with_ogc/server/index.html">Documentation: QGIS as OGC Data Server</a></li><li><a href="https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/server.html">Cookbook: QGIS Server and Python</a></li><li><a href="https://qgis.org/pyqgis/3.10/server/index.html">PyQGIS: QGIS ServerAPI</a></li><li><a href="http://itopen.it/bulk/FOSS4G-IT-2020">Workshop: QGIS Server With Python Superpowers</a></li></ul><img src="images/doc.png" width="600" class="centered"></img></div><div class="step step-level-1" step="19" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="30400" data-y="0" data-z="0"><h1 id="community">Community</h1><img src="images/team.jpeg" width="700" class="centered"></img></div><div class="step step-level-1" step="20" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="32000" data-y="0" data-z="0"><p class="chapter">Drawbacks</p><img src="images/broken.png" width="200" class="centered"></img></div><div class="step step-level-1" step="21" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="33600" data-y="0" data-z="0"><h1 id="visibility">Visibility</h1><ul><li>No official logo</li><li>Buried documentation</li></ul><img src="images/doc2.png" width="400" class="centered"></img></div><div class="step step-level-1" step="22" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="35200" data-y="0" data-z="0"><h1 id="performances">Performances</h1><ul><li>Same rendering engine</li><li>Not all QGIS Desktop features are server friendly</li></ul><img src="images/perf.png" width="600" class="centered"></img><p class="centered"><a href="https://oslandia.com/2019/06/21/qgis-3-and-performance-analysis/">QGIS 3 and performance analysis</a></p></div><div class="step step-level-1" step="23" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="36800" data-y="0" data-z="0"><h1 id="ecosystem">Ecosystem</h1><ul><li>QGIS Desktop plugins: ~1250</li><li>QGIS Server plugins: 11</li></ul><img src="images/plugins.png" width="1000" class="centered"></img><p class="centered"><a href="https://plugins.qgis.org/plugins/server/">https://plugins.qgis.org/plugins/server/</a></p></div><div class="step step-level-1" step="24" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="38400" data-y="0" data-z="0"><h1 id="out-of-the-box-experience">Out-of-the box experience</h1><ul><li>No administration panel</li><li>No monitoring panel</li><li>No landing page (except for OGCAPIF)</li><li>Not so sexy exception page</li></ul><img src="images/error.png" width="800" class="centered"></img></div><div class="step step-level-1" step="25" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="40000" data-y="0" data-z="0"><p class="chapter">WIP</p><img src="images/fixed.png" width="200" class="centered"></img></div><div class="step step-level-1" step="26" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="41600" data-y="0" data-z="0"><h1 id="documentation">Documentation</h1><ul><li>A <a href="https://github.com/qgis/QGIS-Enhancement-Proposals/issues/184">QEP</a> has been funded by QGIS.org to:<ul><li>Improve the documentation</li><li>Add a dedicated page for QGIS Server</li></ul></li></ul><img src="images/phare.jpeg" width="600" class="centered"></img></div><div class="step step-level-1" step="27" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="43200" data-y="0" data-z="0"><h1 id="id2">Performances</h1><ul><li>Monitoring to avoid regressions</li><li><a href="https://github.com/qgis/QGIS-Enhancement-Proposals/issues/185">Another QEP</a> has been funded by QGIS.org</li></ul><img src="images/graffiti2.png" width="500" class="centered"></img><p class="centered"><a href="http://test.qgis.org/perf_test/graffiti/">http://test.qgis.org/perf_test/graffiti/</a></p></div><div class="step step-level-1" step="28" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="44800" data-y="0" data-z="0"><h1 id="monitoring">Monitoring</h1><ul><li>Big infrastructure</li><li>Currently under discussion</li><li>On the fly configuration?</li></ul><img src="images/pulse.png" width="500" class="centered"></img></div><div class="step step-level-1" step="29" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="46400" data-y="0" data-z="0"><h1 id="catalog-plugin">Catalog plugin</h1><ul><li>Currently under development</li></ul><img src="images/catalog.gif" width="800" class="centered"></img></div><div class="step step-level-1" step="30" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="48000" data-y="0" data-z="0"><p class="chapter">Thanks!</p></div></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/gotoSlide.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>